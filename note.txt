now we need to work on the search strategy. when the simulation starts and all joints are set to 0. the aruco is not in view. for ibvs to work the aruco needs to be in camera frame. we will set the arm to a wrist dominant posture (the arm will be upright, only the wrist will be looking at ground like searching for a friend when you are on top of a building)

we now use
# ==========================================
# SEARCH CONFIGURATION
# ==========================================
# Bird's eye view pose (elevated, camera ~60° down)
SEARCH_POSE = {
    'shoulder_lift': -0.8,   # Arm raised (elevated)
    'elbow_flex': 0.3,       # Elbow less bent - arm extends outward
    'wrist_flex': 1.2,       # Wrist tilted more toward ground (was 0.5)
    'wrist_roll': 0.0,
    'gripper': 0.8           # Gripper open
}

# Search pattern parameters
PAN_RANGE = (-1.0, 1.0)      # ±57° base rotation
PAN_STEP = 0.3               # ~17° increments (7 viewpoints)
ELBOW_VARIATIONS = [0.0, -0.3, 0.3]  # Mid/near/far (try center first)

# Detection requirements
REQUIRED_CONSECUTIVE = 3     # Detections needed to confirm
SETTLE_TIME = 0.3            # Seconds to wait after motion


### 1) `shoulder < elbow < wrist`

**Suggested name:** **wrist-dominant / wrist-leading** posture
**What it means physically:** each successive joint (from base → wrist) contributes more to the tool angle — the wrist is the most bent. The hand orientation is achieved mainly by the wrist rather than by shoulder/elbow.
**Typical geometry:** more local bending near the end-effector, more compact/fine positioning of the gripper.
**When to use:** precision pick/place (top-down or tight alignment), fine orientation adjustments, when you want the shoulder to stay low or fixed.
**Pros:** good local control of orientation; lower shoulder motion; fine approach to small targets.
**Cons:** less clearance, wrist may approach joint limits, contact forces at the wrist can be larger.

---

### 2) `shoulder > elbow > wrist`

**Suggested name:** **shoulder-dominant / elbow-leading** posture
**What it means physically:** the base/shoulder provides most of the orientation; wrist is least bent. The arm is more “extended” or arched, using upstream joints to reach.
**Typical geometry:** larger shoulder/elbow excursions, forearm extended, wrist nearly neutral.
**When to use:** pushing/pulling from sides, reaching around obstacles, tasks needing clearance or stiffness at the tool (forceful interactions).
**Pros:** more clearance, better leverage and stiffness for contact tasks, less wrist torque.
**Cons:** larger shoulder torques, possibly less precise local orientation control.

---

### Important caveats

* These labels depend on your **joint sign convention** and whether you compare raw angles or absolute magnitudes. When I say “dominant” I mean the joint has the largest **contribution** (magnitude) to the final tool pitch.
* **Elbow-up / elbow-down** is a *geometric* property (where the elbow sits relative to the shoulder→wrist line) and **cannot** always be inferred from a simple numeric ordering of angles.
* Use these as **heuristics**, not invariants. The same Cartesian goal can be achieved by many orderings.

---

### Practical suggestion

Classify postures by:

1. dominance = `abs(angle)` ordering (to know which joint contributes most), and
2. the geometric elbow test (signed cross product / perpendicular distance from shoulder→wrist line) to decide elbow-up vs elbow-down.
